"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _path = _interopRequireDefault(require("path"));

var _fs = _interopRequireDefault(require("fs"));

class AppContext {
  constructor(app) {
    this.controller = {};
    this.service = {};
    this.dao = {};
    this.app = app;
  }

  getControllers() {
    return this.controller;
  } // 动态引入文件


  dynamicRequrie(path) {
    var map = {};

    if (_fs.default.existsSync(path)) {
      var childs = _fs.default.readdirSync(path);

      childs.forEach(childName => {
        var info = _fs.default.statSync(path + "/" + childName);

        if (!info.isDirectory()) {
          var result = /(\S+)\.(js|ts)$/.exec(childName);

          if (result && result[1] !== 'index') {
            map[result[1]] = require(path + '/' + childName);
          }
        }
      });
    }

    return map;
  } // 将依赖项注入


  inject(constructor, instance) {
    var context = this;

    if (constructor.inject) {
      constructor.inject.forEach(injectName => {
        Object.defineProperty(instance, injectName, {
          get() {
            return context.dao[injectName] || context.service[injectName] || context.api[injectName];
          }

        });
      });
    }
  }

  registerApiRouter() {
    var {
      app,
      inject,
      dynamicRequrie
    } = this;
    var apiMap = dynamicRequrie(_path.default.resolve(__dirname, './api'));
    Object.keys(apiMap).map(apiName => {
      var ApiConstructor = apiMap[apiName].default;
      var apiInstance = new ApiConstructor();
      this.controller[apiName] = apiInstance; // 注入依赖

      inject(ApiConstructor, apiInstance); // 注册路由

      Object.getOwnPropertyNames(ApiConstructor.prototype).map(key => {
        // 如果requestMethod不为空表示这是一个路由
        if (apiInstance[key].requestMethod) {
          var {
            requestUrl,
            requestMethod,
            middleWare
          } = apiInstance[key];
          middleWare = middleWare || [];
          middleWare.push(apiInstance[key]);
          var middleWares = [];
          middleWare.forEach(fn => {
            middleWares.push((req, res, next) => {
              fn.call(apiInstance, req, res, next);
            });
          });
          app[requestMethod](requestUrl, ...middleWares);
        }
      });
    });
  } // 静态文件路由


  registerStaticFileRouter() {
    var {
      app
    } = this;
    app.use(app.get('express').static(_path.default.resolve(__dirname, '../static')));
    app.use('/card', app.get('express').static(_path.default.resolve(__dirname, '../cards')));
  }

}

AppContext.init = function (app) {
  var appContext = new AppContext(app); // appContext.registerService(app)

  appContext.registerApiRouter(); // appContext.registerDao(app)

  appContext.registerStaticFileRouter();
  console.log('controller', appContext.getControllers());
};

var _default = AppContext;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jb250ZXh0LnRzIl0sIm5hbWVzIjpbIkFwcENvbnRleHQiLCJjb25zdHJ1Y3RvciIsImFwcCIsImNvbnRyb2xsZXIiLCJzZXJ2aWNlIiwiZGFvIiwiZ2V0Q29udHJvbGxlcnMiLCJkeW5hbWljUmVxdXJpZSIsInBhdGgiLCJtYXAiLCJmcyIsImV4aXN0c1N5bmMiLCJjaGlsZHMiLCJyZWFkZGlyU3luYyIsImZvckVhY2giLCJjaGlsZE5hbWUiLCJpbmZvIiwic3RhdFN5bmMiLCJpc0RpcmVjdG9yeSIsInJlc3VsdCIsImV4ZWMiLCJyZXF1aXJlIiwiaW5qZWN0IiwiaW5zdGFuY2UiLCJjb250ZXh0IiwiaW5qZWN0TmFtZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0IiwiYXBpIiwicmVnaXN0ZXJBcGlSb3V0ZXIiLCJhcGlNYXAiLCJyZXNvbHZlIiwiX19kaXJuYW1lIiwia2V5cyIsImFwaU5hbWUiLCJBcGlDb25zdHJ1Y3RvciIsImRlZmF1bHQiLCJhcGlJbnN0YW5jZSIsImdldE93blByb3BlcnR5TmFtZXMiLCJwcm90b3R5cGUiLCJrZXkiLCJyZXF1ZXN0TWV0aG9kIiwicmVxdWVzdFVybCIsIm1pZGRsZVdhcmUiLCJwdXNoIiwibWlkZGxlV2FyZXMiLCJmbiIsInJlcSIsInJlcyIsIm5leHQiLCJjYWxsIiwicmVnaXN0ZXJTdGF0aWNGaWxlUm91dGVyIiwidXNlIiwic3RhdGljIiwiaW5pdCIsImFwcENvbnRleHQiLCJjb25zb2xlIiwibG9nIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFNQSxNQUFNQSxVQUFOLENBQWlCO0FBT2hCQyxFQUFBQSxXQUFXLENBQUNDLEdBQUQsRUFBbUI7QUFDN0IsU0FBS0MsVUFBTCxHQUFrQixFQUFsQjtBQUNBLFNBQUtDLE9BQUwsR0FBZSxFQUFmO0FBQ0EsU0FBS0MsR0FBTCxHQUFXLEVBQVg7QUFDQSxTQUFLSCxHQUFMLEdBQVdBLEdBQVg7QUFDQTs7QUFHREksRUFB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LEVBQUFBLFVBQVUsQ0FBQzFCLGlCQUFYLEdBSDZDLENBSTdDOztBQUNBMEIsRUFBQUEsVUFBVSxDQUFDSix3QkFBWDtBQUNBSyxFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxZQUFaLEVBQTBCRixVQUFVLENBQUNsRCxjQUFYLEVBQTFCO0FBQ0EsQ0FQRDs7ZUFTZU4sVSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwYXRoIGZyb20gJ3BhdGgnXHJcbmltcG9ydCBmcyBmcm9tICdmcydcclxuaW1wb3J0IHsgQXBwbGljYXRpb24sIFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSAnZXhwcmVzcydcclxuXHJcbnR5cGUgY29udGV4dE1hcCA9IHtcclxuXHRba2V5OiBzdHJpbmddOiBhbnlcclxufVxyXG5jbGFzcyBBcHBDb250ZXh0IHtcclxuXHRwcml2YXRlIGNvbnRyb2xsZXI6IGNvbnRleHRNYXBcclxuXHRwcml2YXRlIHNlcnZpY2U6IGNvbnRleHRNYXBcclxuXHRwcml2YXRlIGRhbzogY29udGV4dE1hcFxyXG5cdHByaXZhdGUgYXBwOiBBcHBsaWNhdGlvblxyXG5cdHB1YmxpYyBzdGF0aWMgaW5pdDogKGFwcDogQXBwbGljYXRpb24pID0+IHZvaWRcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHBsaWNhdGlvbikge1xyXG5cdFx0dGhpcy5jb250cm9sbGVyID0ge31cclxuXHRcdHRoaXMuc2VydmljZSA9IHt9XHJcblx0XHR0aGlzLmRhbyA9IHt9XHJcblx0XHR0aGlzLmFwcCA9IGFwcFxyXG5cdH1cclxuXHJcblxyXG5cdGdldENvbnRyb2xsZXJzKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuY29udHJvbGxlclxyXG5cdH1cclxuXHJcblx0Ly8g5Yqo5oCB5byV5YWl5paH5Lu2XHJcblx0ZHluYW1pY1JlcXVyaWUocGF0aDogc3RyaW5nKSB7XHJcblx0XHRsZXQgbWFwOiBjb250ZXh0TWFwID0ge31cclxuXHRcdGlmIChmcy5leGlzdHNTeW5jKHBhdGgpKSB7XHJcblx0XHRcdGxldCBjaGlsZHMgPSBmcy5yZWFkZGlyU3luYyhwYXRoKVxyXG5cdFx0XHRjaGlsZHMuZm9yRWFjaCgoY2hpbGROYW1lOiBzdHJpbmcpID0+IHtcclxuXHRcdFx0XHRsZXQgaW5mbzogZnMuU3RhdHMgPSBmcy5zdGF0U3luYyhwYXRoICsgXCIvXCIgKyBjaGlsZE5hbWUpXHJcblx0XHRcdFx0aWYgKCFpbmZvLmlzRGlyZWN0b3J5KCkpIHtcclxuXHRcdFx0XHRcdGxldCByZXN1bHQgPSAvKFxcUyspXFwuKGpzfHRzKSQvLmV4ZWMoY2hpbGROYW1lKVxyXG5cdFx0XHRcdFx0aWYgKHJlc3VsdCAmJiByZXN1bHRbMV0gIT09ICdpbmRleCcpIHtcclxuXHRcdFx0XHRcdFx0bWFwW3Jlc3VsdFsxXV0gPSByZXF1aXJlKHBhdGggKyAnLycgKyBjaGlsZE5hbWUpXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG1hcFxyXG5cdH1cclxuXHJcblx0Ly8g5bCG5L6d6LWW6aG55rOo5YWlXHJcblx0aW5qZWN0KGNvbnN0cnVjdG9yOiBhbnksIGluc3RhbmNlOiBhbnkpIHtcclxuXHRcdGxldCBjb250ZXh0ID0gdGhpc1xyXG5cdFx0aWYgKGNvbnN0cnVjdG9yLmluamVjdCkge1xyXG5cdFx0XHRjb25zdHJ1Y3Rvci5pbmplY3QuZm9yRWFjaCgoaW5qZWN0TmFtZTogYW55KSA9PiB7XHJcblx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGluc3RhbmNlLCBpbmplY3ROYW1lLCB7XHJcblx0XHRcdFx0XHRnZXQoKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiBjb250ZXh0LmRhb1tpbmplY3ROYW1lXSB8fCBjb250ZXh0LnNlcnZpY2VbaW5qZWN0TmFtZV0gfHwgY29udGV4dC5hcGlbaW5qZWN0TmFtZV1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KVxyXG5cdFx0XHR9KVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmVnaXN0ZXJBcGlSb3V0ZXIoKSB7XHJcblx0XHRsZXQgeyBhcHAsIGluamVjdCwgZHluYW1pY1JlcXVyaWUgfSA9IHRoaXNcclxuXHRcdGxldCBhcGlNYXAgPSBkeW5hbWljUmVxdXJpZShwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnLi9hcGknKSlcclxuXHRcdE9iamVjdC5rZXlzKGFwaU1hcCkubWFwKGFwaU5hbWUgPT4ge1xyXG5cdFx0XHRsZXQgQXBpQ29uc3RydWN0b3I6IGFueSA9IGFwaU1hcFthcGlOYW1lXS5kZWZhdWx0XHJcblx0XHRcdGxldCBhcGlJbnN0YW5jZSA9IG5ldyBBcGlDb25zdHJ1Y3RvcigpXHJcblx0XHRcdHRoaXMuY29udHJvbGxlclthcGlOYW1lXSA9IGFwaUluc3RhbmNlXHJcblxyXG5cdFx0XHQvLyDms6jlhaXkvp3otZZcclxuXHRcdFx0aW5qZWN0KEFwaUNvbnN0cnVjdG9yLCBhcGlJbnN0YW5jZSlcclxuXHJcblx0XHRcdC8vIOazqOWGjOi3r+eUsVxyXG5cdFx0XHRPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhBcGlDb25zdHJ1Y3Rvci5wcm90b3R5cGUpLm1hcChrZXkgPT4ge1xyXG5cdFx0XHRcdC8vIOWmguaenHJlcXVlc3RNZXRob2TkuI3kuLrnqbrooajnpLrov5nmmK/kuIDkuKrot6/nlLFcclxuXHRcdFx0XHRpZiAoYXBpSW5zdGFuY2Vba2V5XS5yZXF1ZXN0TWV0aG9kKSB7XHJcblx0XHRcdFx0XHRsZXQgeyByZXF1ZXN0VXJsLCByZXF1ZXN0TWV0aG9kLCBtaWRkbGVXYXJlIH0gPSBhcGlJbnN0YW5jZVtrZXldXHJcblx0XHRcdFx0XHRtaWRkbGVXYXJlID0gbWlkZGxlV2FyZSB8fCBbXVxyXG5cdFx0XHRcdFx0bWlkZGxlV2FyZS5wdXNoKGFwaUluc3RhbmNlW2tleV0pXHJcblx0XHRcdFx0XHRsZXQgbWlkZGxlV2FyZXM6IGFueSA9IFtdXHJcblx0XHRcdFx0XHRtaWRkbGVXYXJlLmZvckVhY2goKGZuOiBGdW5jdGlvbikgPT4ge1xyXG5cdFx0XHRcdFx0XHRtaWRkbGVXYXJlcy5wdXNoKChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UsIG5leHQ6IEZ1bmN0aW9uKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0Zm4uY2FsbChhcGlJbnN0YW5jZSwgcmVxLCByZXMsIG5leHQpXHJcblx0XHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdChhcHAgYXMgYW55KVtyZXF1ZXN0TWV0aG9kXShyZXF1ZXN0VXJsLCAuLi5taWRkbGVXYXJlcylcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pXHJcblx0XHR9KVxyXG5cdH1cclxuXHJcblxyXG5cdC8vIOmdmeaAgeaWh+S7tui3r+eUsVxyXG5cdHJlZ2lzdGVyU3RhdGljRmlsZVJvdXRlcigpIHtcclxuXHRcdGxldCB7IGFwcCB9ID0gdGhpc1xyXG5cdFx0YXBwLnVzZShhcHAuZ2V0KCdleHByZXNzJykuc3RhdGljKHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuLi9zdGF0aWMnKSkpXHJcblx0XHRhcHAudXNlKCcvY2FyZCcsIGFwcC5nZXQoJ2V4cHJlc3MnKS5zdGF0aWMocGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJy4uL2NhcmRzJykpKVxyXG5cdH1cclxufVxyXG5cclxuQXBwQ29udGV4dC5pbml0ID0gZnVuY3Rpb24gKGFwcDogQXBwbGljYXRpb24pIHtcclxuXHRsZXQgYXBwQ29udGV4dCA9IG5ldyBBcHBDb250ZXh0KGFwcClcclxuXHQvLyBhcHBDb250ZXh0LnJlZ2lzdGVyU2VydmljZShhcHApXHJcblx0YXBwQ29udGV4dC5yZWdpc3RlckFwaVJvdXRlcigpXHJcblx0Ly8gYXBwQ29udGV4dC5yZWdpc3RlckRhbyhhcHApXHJcblx0YXBwQ29udGV4dC5yZWdpc3RlclN0YXRpY0ZpbGVSb3V0ZXIoKVxyXG5cdGNvbnNvbGUubG9nKCdjb250cm9sbGVyJywgYXBwQ29udGV4dC5nZXRDb250cm9sbGVycygpKVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBcHBDb250ZXh0Il19